import 'dart:convert';

import 'package:nostr_core_dart/nostr.dart';

Future<void> main() async {
  var json = jsonDecode('{\"id\":\"fc0c616b4d8b239ac3bd3d1f4be9703a43cf4d3597cc6133f8bc6511c0cd9c33\",\"created_at\":1695118273,\"pubkey\":\"79f00d3f5a19ec806189fcab03c1be4ff81d18ee4f653c88fac41fe03570f432\",\"kind\":9735,\"sig\":\"737e1312252307299df80d16f9189bcb53fb8ec9d5f2d4f90785b35bb6a3ed9d102bbdace4b3131747f197943ee13d69e2e4f7059d602087aa0016ce77fd7287\",\"content\":\"\",\"tags\":[[\"p\",\"77092a4032bc11dc053460b94b1714ec908af4446e082306f3fe32a93e245968\"],[\"bolt11\",\"lnbc230n1pjsjuuapp5jhrs7h2zue7hzcj54jqg3kay6r99dw0acjxkgn2svry40cnulzrshp50paasfn08n8rwef5uv6jangsmfye0vagdeemkqkxw7m2mtgylkkscqzzsxqyz5vqsp5sd2l9n23t7p96x3hm0tr5kflqwuxfpwvwqqrrsxusv37nk0ly0vs9qyyssqxt0lewz3hwpha78zw7l7me3m35eny58n7tl6crwqhn42dd3pnuhzqr8ln3z75tqk0nzyuddtuf9ayzf6p6ne2gne3tfzzkw33lktkgqqluzcka\"],[\"preimage\",\"eb3c44297d317992bf33ea900f0911a00d468c8e8850e996ec0a96ff65293f3d\"],[\"description\",\"{\\\"id\\\":\\\"27f1e009c02518bfe6015fb16ac37e8649ee636decae5ae0679e8f4d3d29f777\\\",\\\"pubkey\\\":\\\"ee1a2962547227d5101f95aa75543118876958f46da4f4d6cc9143da96aea796\\\",\\\"created_at\\\":1695118236,\\\"kind\\\":9734,\\\"tags\\\":[[\\\"relays\\\",\\\"wss://relay.0xchat.com\\\",\\\"wss://relay.damus.io\\\",\\\"wss://relay.nostr.band\\\",\\\"wss://nostr.wine\\\",\\\"wss://nos.lol\\\",\\\"wss://relay.plebstr.com\\\"],[\\\"amount\\\",\\\"23000\\\"],[\\\"lnurl\\\",\\\"LNURL1DP68GURN8GHJ7EM9W3SKCCNE9E3K7MF0D3H82UNVWQHKY6T5W3JHYERJV4SK6VESXY6NXHVECCA\\\"],[\\\"p\\\",\\\"77092a4032bc11dc053460b94b1714ec908af4446e082306f3fe32a93e245968\\\"],[\\\"anon\\\",\\\"pzap1qy6x2u9c88z8xumqzlxzh4w4dt8fkwlu0c2e476z9q2n38wu9twsch0j4a94a0094cg5lfqzv2fzqy4tsgswxh5kqzz8z0s68re8a5pfggy5rwck38cwk7esxr9m7pps7n4zxcjtz2e7trjvnruvwgs0gqn6sc5zdzna4gvmaygpmvzzwhnv3d2k824qgrk4xa6g90rwlvtajdh7l48tq9t8x7h939mvk9xm5awn7h0y3uxds8xy960vlt9pzyf6n4zug4hyp5mc209z08qsydjqhrn5na6avuqwu7dupjq2qqecazx6n4exup3pnrelvvztjqfl2jerdvjt7x67ywdgxej8xnwygsxy9tj5extxpyul0q7f4s2dwfd5xzmypt5gltpadunfuetgh9salma5zrslfdknkc58hf9j0ev09pnd54lckd273x6mwy20v8t9pr9dgtxqrqfhf2rw2xal3nq8vewzvtfmhvvft99v9zkfp9kyvr9e474xgq4sm7etuxg6965p7d0fj8vwplk66gkge39e8e0swqhvwv6knppe7068q52c8tdru8dmzk59d0mhc4scqfk6exqek7hlwwvra7uup8t3ptkcad5dh8upce280u0q24l5w0wssjckx06mcql4jft4ud8q8a3v9aju8rmw8kq8cau02zv956n60q3hg3566498sypy3gffmmkwglm9smvjvjlw54rg72u\\\"]],\\\"content\\\":\\\"\\\",\\\"sig\\\":\\\"d3bb8315374efff16cf3037f2ce0e3714745fd698de790040a2bdf54e02b6b81f9005c7ed1849a8845b6637a97a3e5bd82bbf51e375ca59a048d21b929764663\\\"}\"]]}');
  Event event = Event.fromJson(json);
  ZapReceipt zapReceipt = await Nip57.getZapReceipt(event, 'test');
  print(zapReceipt.sender);
  print(zapReceipt.content);
}
